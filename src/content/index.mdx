import { Bleed } from 'nextra/components'

# Introduction

This is the documentation for SpecFWAT, a package for seismic full-waveform adjoint tonography (FWAT) based on the open-source software package [SPECFEM3D](https://specfem.org/) driven by modern Fortran. It is designed to be user-friendly and fast, allowing users to perform FWAT on supercomputer accelerated by GPUs and CPUs.

The SpecFWAT Intergated the typlical FWAT workflow in a 3 execuable files, which includes:

1. **`xfwat_mesh_databases`**: Creation of GLL mesh and model databases based on specified simulation type and regular grid model in the `DATA/tomo_files/tomography_model.h5`.

2. **`xfwat_fwd_measure_adj`**: Forward simulation, adjoint source measurements and computing of adjoint wavefields.
3. **`xfwat_post_proc`**: Taking sum of kernels, preconditioning, smoothing and weight sum of gradient for joint inversion.
4. **`xfwat_optimize`**: Optimization of model parameters based on steepest descent, conjugate gradient or L-BFGS methods.

Thus, the interaction with SpecFWAT is simple and straightforward, allowing users to focus on their seismic data and model parameters without worrying about the underlying complexities of the inversion process.

```bash filename="run_fwat.sh" copy showLineNumbers
for it in `seq 0 9`; do
    model=`printf "M%02d" $it`
    if [ $it -eq 0 ]; then
        cp initial_model.h5 DATA/tomo_files/tomography_model.h5
    fi
    mpirun -np $NPROC ../../bin/xfwat_mesh_databases -s tele
    mpirun -np $NPROC ../../bin/xfwat_fwd_measure_adj -m $model -s tele -r 3
    mpirun -np $NPROC ../../bin/xfwat_post_proc -m $model
    mpirun -np $NPROC ../../bin/xfwat_optimize -m $model
done
```